T = int(input())
for _ in range(T) :
    st = 'ogwbry'
    N = int(input())    # 큐브 돌린 횟수
    cmds = input().split()
    c = []
    for ch in st :
        for _ in range(10) :
            c.append(ch)

    for cmd in cmds :
        if cmd=='B-':       # 뒤쪽(오렌지색) 반시계방향
            c[1:10] = c[3], c[6], c[9], c[2], c[5], c[8], c[1], c[4], c[7]
            c[11],c[12],c[13],c[21],c[22],c[23],c[31],c[32],c[33],c[51],c[52],c[53]=c[51],c[52],c[53],c[11],c[12],c[13],c[21],c[22],c[23],c[31],c[32],c[33]
        elif cmd=='B+':     # 뒤쪽(오렌지색) 시계방향
            c[1:10] = c[7], c[4], c[1], c[8], c[5], c[2], c[9], c[6], c[3]
            c[11], c[12], c[13], c[21], c[22], c[23], c[31], c[32], c[33], c[51], c[52], c[53] = c[21], c[22], c[23], c[31], c[32], c[33], c[51], c[52], c[53], c[11], c[12], c[13]

        elif cmd == 'L-' :  # 왼쪽(초록색) 반시계 방향
            c[11:20] = c[13], c[16], c[19], c[12],c[15],c[18],c[11],c[14],c[17]
            c[1], c[4], c[7], c[21], c[24], c[27], c[41], c[44], c[47], c[59], c[56], c[53] = c[21], c[24], c[27], c[41], c[44], c[47],c[59], c[56], c[53], c[1], c[4], c[7]
        elif cmd == 'L+':  # 왼쪽(초록색) 시계 방향
            c[11:20] = c[17], c[14], c[11], c[18], c[15], c[12], c[19], c[16], c[13]
            c[1], c[4], c[7], c[21], c[24], c[27], c[41], c[44], c[47], c[59], c[56], c[53] = c[59], c[56], c[53], c[1], c[4], c[7], c[21], c[24], c[27], c[41], c[44], c[47]

        elif cmd == 'R-' :  # 오른쪽(파란색) 반시계방향
            c[31:40] = c[33],c[36],c[39],c[32],c[35],c[38],c[31],c[34],c[37]
            c[3],c[6],c[9],c[23],c[26],c[29],c[43],c[46],c[49],c[57],c[54],c[51] = c[57],c[54],c[51],c[3],c[6],c[9],c[23],c[26],c[29],c[43],c[46],c[49]
        elif cmd=='R+' :    # 오른쪽(파란색) 시계방향
            c[31:40] = c[37], c[34], c[31], c[38], c[35], c[32], c[39], c[36], c[33]
            c[3], c[6], c[9], c[23], c[26], c[29], c[43], c[46], c[49], c[57], c[54], c[51] = c[23], c[26], c[29], c[43], c[46], c[49],c[57], c[54], c[51], c[3], c[6],c[9]

        elif cmd == 'U-' :  # 위쪽(흰색) 반시계 방향
            c[21:30] = c[23],c[26],c[29],c[22],c[25],c[28],c[21],c[24],c[27]
            c[7],c[8],c[9],c[31],c[34],c[37],c[43],c[42],c[41],c[19],c[16],c[13]=c[31],c[34],c[37],c[43],c[42],c[41],c[19],c[16],c[13],c[7],c[8],c[9]
        elif cmd == 'U+':   # 위쪽(흰색) 시계방향
            c[21:30] = c[27], c[24], c[21], c[28], c[25], c[22], c[29], c[26], c[23]
            c[7], c[8], c[9], c[31], c[34], c[37], c[43], c[42], c[41], c[19], c[16], c[13] = c[19], c[16], c[13], c[7], c[8], c[9], c[31], c[34], c[37], c[43], c[42], c[41]

        elif cmd=='D-' :    # 아래쪽(노란색) 반시계방향 => 위에서 보면 시계
            c[51:60] = c[53],c[56],c[59],c[52],c[55],c[58],c[51],c[54],c[57]
            c[3], c[2],c[1],c[11],c[14],c[17],c[47],c[48],c[49],c[39],c[36],c[33] = c[11],c[14],c[17],c[47],c[48],c[49],c[39],c[36],c[33],c[3], c[2],c[1]
        elif cmd=='D+' :    # 아래쪽(노란색) 시계방향 => 위에서 보면 반시계
            c[51:60] = c[57], c[54], c[51], c[58], c[55], c[52], c[59], c[56], c[53]
            c[3], c[2], c[1], c[11], c[14], c[17], c[47], c[48], c[49], c[39], c[36], c[33] = c[39], c[36], c[33], c[3], c[2], c[1],c[11], c[14], c[17], c[47], c[48], c[49]

        elif cmd=='F-' :    # 앞쪽(빨간색) 반시계 방향
            c[41:50]=c[43],c[46],c[49],c[42],c[45],c[48],c[41],c[44],c[47]
            c[17],c[18],c[19],c[27],c[28],c[29],c[37],c[38],c[39],c[57],c[58],c[59] = c[27],c[28],c[29],c[37],c[38],c[39],c[57],c[58],c[59],c[17],c[18],c[19]
        elif cmd=='F+' :    # 앞쪽(빨간색) 시계방향
            c[41:50] = c[47], c[44], c[41], c[48], c[45], c[42], c[49], c[46], c[43]
            c[17], c[18], c[19], c[27], c[28], c[29], c[37], c[38], c[39], c[57], c[58], c[59] = c[57], c[58], c[59], c[17], c[18], c[19],c[27], c[28], c[29], c[37], c[38], c[39]

    for i in (21, 24, 27) :
        print(''.join(c[i:i+3]))